

var global_nested_statewise=[];

function makeTableHTML() {
	var tab = d3.select("#table-div")	
	
    var result = "<hr style= 'border-top: 1px solid #123455;'><table id = 'statetable' border=1 class='table table-bordered  table-hover mytableclass'>";
		result += "<tr style = 'background-color:#d9d8d5'>";
		result += "<th>Rank</th>";
		result += "<th>State</th>";
		result += "<th>Total Number of Cases</th>";
		result += "<th>Number of Litigated Cases</th>";
		result += "<th>Number of Non-Litigated Cases</th>";
		result += "<th>Total Indemnity Cost in USD</th>";
		result += "<th>Total Medical Cost in USD</th>";
		result += "<th>Total Expense Cost in USD</th>";		
        result += "</tr>";
    for(var i=0; i<global_nested_statewise.length; i++) {
        result += "<tr>";
		result += "<td>"+(i+1)+"</td>";
        result += "<td>"+global_nested_statewise[i].key+"</td>";
		result += "<td>"+global_nested_statewise[i].total_count+"</td>";
		result += "<td>"+global_nested_statewise[i].litigated_count+"</td>";
		result += "<td>"+global_nested_statewise[i].nonlitigated_count+"</td>";
		result += "<td>"+global_nested_statewise[i].total_Indemnity_Cost.toLocaleString()+"</td>";
		result += "<td>"+global_nested_statewise[i].total_Medical_Cost+"</td>";
		result += "<td>"+global_nested_statewise[i].total_Expense_Cost+"</td>";		
        result += "</tr>";
    }
    result += "</table>";
	$("#statetable").remove();
	//console.log(result);
	tab.html(result);
	
	
}

$(function () {

    // Load the data from the HTML table and tag it with an upper case name used for joining
    var mapData = [
			{
				"name": "Illinois",
				"abbr": "IL",
				"path": "M602.5291408811875,139.65085389319802L640.3465164053433,137.60895176560598L660.4501716691619,135.97578895632455L660.2426170407207,141.4019236601025L663.9288747867597,147.41913072921307L668.1046102593052,157.411521229257L673.9100135128825,223.64869018395234L672.0237732044222,228.9315910408693L675.251573753229,234.69076470168875L676.0451107164877,239.58112046837846L673.6934052554535,243.8216765482232L673.3113070055044,247.57630139000003L669.9314335561429,253.9166237398274L667.4833498650129,254.5909709717937L668.3772208246987,258.08005264367375L666.8325740924164,259.60600035938455L666.0802771009452,266.3339262481312L666.9504632096675,268.1207913207413L664.4191064919818,272.3614115439415L666.8625901451123,277.1174646665145L658.0856941335126,280.4669836257557L657.4767682391125,283.4586919392276L659.814249203468,286.9912206864833L657.2277129663944,289.5199113901683L648.8318240972023,285.8264628885987L646.3285791104732,286.32161886491235L643.3140345157354,291.4955251637267L644.5108987107694,292.95750363510297L640.9890481087282,292.8997689460673L635.4933501277527,285.2318323692498L637.1689844950138,283.2589989822069L634.998624962922,277.9899643353574L634.7038876104034,273.6755506702889L627.2581282140806,268.1346866996986L624.9122419379062,268.90465182200035L622.2946340033711,265.35583754193226L615.5237091970171,260.0438448584541L615.3763873441799,255.5657943749361L618.6064143292581,248.09872968147397L617.8560109155999,245.51433017432555L619.7686074451136,241.99270770443468L616.5856447570238,240.17655369870636L611.8077333223412,239.22282666759224L609.4877845834842,241.98613409823406L607.743923134396,240.38346168423254L605.8183210629651,231.21167257314005L598.3601720716215,225.58242251249658L591.4652338753343,218.6647340599252L588.3782506964907,210.15928302830253L587.8764808168054,204.4664224967005L589.5324541861138,200.37063756036173L589.6322421844218,195.26825930696464L595.3413689025583,191.89410550747903L595.6928351816055,187.55115788252579L598.296349102792,184.6348015570079L598.3774233455248,179.68863389334297L594.7463846877545,175.8642677454077L595.8565668687218,170.86686025973472L603.8468513707121,169.04422637905736L610.1074410751664,165.13064743795098L610.5292526966264,160.7828861741741L613.1296183536255,158.77289309733055L613.5881400779987,153.34254447230182L612.8077281849294,149.8413548910844L608.0340331341501,147.35193495092858L607.3009174220434,144.464502088706Z"
			},
			{
				"name": "Indiana",
				"abbr": "IN",
				"path": "M699.5394383051255,152.95139108676608L723.8481142771936,150.2286260011474L724.0653716727263,152.0649028628618L728.1294828470387,185.4338619745854L732.4062932831773,224.5641155302992L730.9158197635415,225.98356199395516L733.574874622419,233.44491271805282L729.8401417720617,234.03856644012194L726.1502305297605,237.10713701710802L720.4913518527806,236.50340573540302L721.3437840374338,242.0024770035816L717.9464342016272,244.7099430330993L716.9173688521432,248.39622588954353L713.2856729779446,250.18778337135177L712.027569415435,257.4673118471708L709.7298470105839,259.5741462597473L704.591549030679,257.46871506928755L703.4306765367393,254.32738783044124L699.0454354205565,258.3417393010311L699.7095873214619,261.37961479171395L694.9408329501518,262.9383655433504L693.2444816671402,260.3105117235302L688.040303812671,263.60194575356036L686.5288218087,266.6915483005856L680.668625487842,263.0444381759837L677.8960089345633,264.2250882018793L675.8142461896185,262.3947491108187L674.205808113066,264.55217803792516L668.755146994374,265.33317525043117L666.9504632096675,268.1207913207413L666.0802771009452,266.3339262481312L666.8325740924164,259.60600035938455L668.3772208246987,258.08005264367375L667.4833498650129,254.5909709717937L669.9314335561429,253.9166237398274L673.3113070055044,247.57630139000003L673.6934052554535,243.8216765482232L676.0451107164877,239.58112046837846L675.251573753229,234.69076470168875L672.0237732044222,228.9315910408693L673.9100135128825,223.64869018395234L668.1046102593052,157.411521229257L670.3028639644499,159.0704635731197L676.6282447953561,158.48793311260147L682.4139203310615,154.6859347731663Z"
			},
			{
				"name": "Iowa",
				"abbr": "IA",
				"path": "M586.2939339620377,112.62978396579865L589.3820459459572,112.47668006621302L589.8118843599412,116.6096260886236L592.9397549269146,119.21973805382049L590.6764327263796,122.723030861918L591.6637190983647,128.9864293959306L593.4524377836287,133.36160512219703L600.8781777497745,136.19802671431785L602.5291408811875,139.65085389319802L607.3009174220434,144.464502088706L608.0340331341501,147.35193495092858L612.8077281849294,149.8413548910844L613.5881400779987,153.34254447230182L613.1296183536255,158.77289309733055L610.5292526966264,160.7828861741741L610.1074410751664,165.13064743795098L603.8468513707121,169.04422637905736L595.8565668687218,170.86686025973472L594.7463846877545,175.8642677454077L598.3774233455248,179.68863389334297L598.296349102792,184.6348015570079L595.6928351816055,187.55115788252579L595.3413689025583,191.89410550747903L589.6322421844218,195.26825930696464L589.5324541861138,200.37063756036173L587.1818390652581,199.5558326595742L582.6590341922524,194.049413739094L580.4810142344026,194.30056528360683L550.5945839965628,196.15900963596187L521.7021343360684,197.0923359698229L497.8612190173735,196.83028567796237L495.43853113667996,193.13236928076594L496.57464720744184,185.88134843463604L494.5084043269557,179.56169679052937L494.61656874530576,172.47007631441988L490.97929288162527,170.00365090055016L490.4162495339624,166.15015555073887L491.66561512887716,162.7614026412407L490.31406464774193,157.83014593539065L487.49677079660904,155.97591232759464L483.8338536518497,143.33588818344015L480.0646475600201,137.15836833178446L481.8757474478148,133.0153948110983L482.574331094484,127.48197618430663L484.1395645003374,125.49066374736458L481.60210938431544,122.70979758456747L482.2946539303686,117.79483702036123L481.2028781062453,115.48326945335543L483.85680721858654,114.8830360249633Z"
			},
			{
				"name": "Missouri",
				"abbr": "MO",
				"path": "M580.4810142344026,194.30056528360683L582.6590341922524,194.049413739094L587.1818390652581,199.5558326595742L589.5324541861138,200.37063756036173L587.8764808168054,204.4664224967005L588.3782506964907,210.15928302830253L591.4652338753343,218.6647340599252L598.3601720716215,225.58242251249658L605.8183210629651,231.21167257314005L607.743923134396,240.38346168423254L609.4877845834842,241.98613409823406L611.8077333223412,239.22282666759224L616.5856447570238,240.17655369870636L619.7686074451136,241.99270770443468L617.8560109155999,245.51433017432555L618.6064143292581,248.09872968147397L615.3763873441799,255.5657943749361L615.5237091970171,260.0438448584541L622.2946340033711,265.35583754193226L624.9122419379062,268.90465182200035L627.2581282140806,268.1346866996986L634.7038876104034,273.6755506702889L634.998624962922,277.9899643353574L637.1689844950138,283.2589989822069L635.4933501277527,285.2318323692498L640.9890481087282,292.8997689460673L644.5108987107694,292.95750363510297L643.5155031470264,304.4855047913434L640.1526953793972,303.4849600483359L639.1854796553566,307.11223902854067L637.7274417206456,307.212857276009L636.5123387069701,307.2959368754831L637.1061734524834,314.219214359498L633.1851516956432,321.5994169726746L618.7464174941733,322.50390319350936L621.976412947888,317.0518355871877L625.1823421329252,313.4511172054989L622.9001769847198,308.1785727725834L526.8838441572433,311.75050869145946L523.7178475323657,311.79897858902984L523.5132718010063,297.74866525274433L522.7448509231428,236.9046773346106L518.1468368152728,235.57688524970695L514.6718047596767,228.9772744992256L511.95477265069127,226.2253868861053L516.6491336553282,217.99357185611393L509.76543496934613,215.90155076509177L507.65386958933414,213.29404047157755L502.39472671283954,205.91761275311137L497.8612190173735,196.83028567796237L521.7021343360684,197.0923359698229L550.5945839965628,196.15900963596187Z"
			},
			{
				"name": "Michigan",
				"abbr": "MI",
				"path": "M751.7028735843619,147.5083052103496L724.0653716727263,152.0649028628618L723.8481142771936,150.2286260011474L699.5394383051255,152.95139108676608L682.4139203310615,154.6859347731663L686.2196781010263,150.5977853266902L688.4001767730784,144.0335316323517L690.5884485597712,139.94264106699893L691.9390710488268,134.3877712796957L692.2631795982381,126.61828981593112L690.9664452659898,118.40100613760387L683.370349325668,102.79498535309699L684.6182635749925,96.49472101552351L682.5704540875906,89.29457142968681L686.3773803783365,81.35122258157617L686.7079519866065,74.9966416402483L685.7139668685945,71.70892716406138L688.8081617202446,70.00106484937373L688.7599955684519,65.38449308864324L693.6839718224683,63.6289597642176L697.0012448667873,58.18530431277259L697.780707123124,68.26945566349218L699.878162808862,68.50100134088257L701.900901303843,63.188613686903864L701.0529328485496,54.65557237741882L702.4165713213291,52.34602607767442L707.598107947411,50.36683902230652L705.2092965854957,44.63769017704567L708.1334922669917,39.220012132205284L712.4452815456492,38.40295684853777L717.7099665861722,41.000964984410984L722.5433909629642,40.86706893926157L725.3753998001927,44.51922620645382L729.0302991607534,44.36372978946929L735.5693046208013,47.21859381269701L737.6795266785429,46.78606404671382L741.7747580277625,52.26172766064906L739.5273186868642,55.80568276031886L742.6455106623873,59.56157867861225L744.2447169120102,64.13927146277092L744.4475248144604,74.63175696891108L740.7881148946262,77.74922948432527L740.5130756476095,83.20265334245187L735.9692421935542,85.65116287967203L734.1741653181991,92.38263526406422L735.4680594662541,94.69491947768347L740.5728627495324,96.35884274065597L743.8264800578759,92.36752614631041L747.2265464871969,84.63191352515264L753.6925932144414,80.95955105574967L757.3533582631633,82.61880271560358L759.9750341899453,86.28058897017377L763.6895053664882,97.54496802210156L764.8432244086666,103.28041432417876L768.045852670738,109.96713292789764L767.3886166715462,120.31943321953804L764.2810661288283,122.31497333213179L763.6545647554199,118.67329305871772L761.5907018857481,120.05082649272026L760.2050073298055,128.7909948692793L756.5257514885848,132.56024034281177L756.1692827903058,139.13667663029196L751.7351908525173,145.17247549652234ZM697.1832900433295,41.23608947783532L697.8729189706345,44.54342137181061L695.3864965651505,45.433042995264486L695.9315752893988,40.60559413359397ZM658.3576602328062,62.9425022949747L655.0970145475688,60.309232936062244L656.5715302162471,56.18582059215032L651.9160659880923,55.975753736327306L653.4056204521465,52.00906509334868L653.1966192592771,47.11580186136007L648.8654532573469,44.111635671143404L646.3404967416977,40.796908902648056L637.843112324197,38.72693055665127L635.3688182613114,39.83918699186256L626.7921907022958,36.34877914793333L606.5267937055054,32.05487373002211L604.1267884898185,27.46489367432264L600.4449616308265,26.00488753047125L607.738570421101,22.65932279226422L610.8851411225795,19.09928547640652L619.1812236653626,17.168537678437133L624.3328559309375,12.68125079396009L626.8303276282327,12.345981531891084L628.7043087707264,9.306507612135192L634.3303399477248,4.755406015520748L637.0695881161556,1.030055022772558L641.3478625293038,-1.605118647363497L645.7666222319032,0.008338262386132556L638.9763062946922,9.117798114641573L637.4323523374745,12.143129477289449L637.9484051734743,17.296638894576063L641.2934095448303,13.053540999254665L647.9312673235821,13.109957024817504L653.2950567984028,15.396110077565027L658.5901165468991,22.572774435456495L661.2384761755544,23.708537218738L665.9604375783556,22.041574898451245L667.2757090178492,23.601334049131083L672.2020295513308,24.04353772700506L681.8458360522204,16.632862692993285L687.1230802719355,15.463725528660234L694.2743495917457,14.991855700548967L698.8476918648441,12.332022972196228L702.48776667799,11.76170257521494L704.1147134008206,19.399292354979025L708.0166113879985,20.01752403385717L711.649009281045,18.356108067525156L713.4417963665973,19.983281365346556L715.6824299556563,17.40591461565441L721.1411111684145,15.96069188948536L722.4628532435031,25.635289162213667L725.5088562553264,29.405585660973202L729.4431914098755,29.979423637976424L729.5126423730862,27.198851260982337L733.2001126085767,26.718012846880583L735.582704975454,29.330179107073718L734.1737259796112,31.67331530985757L723.3782492607066,31.214246401620585L718.4575772952568,33.057435673537384L712.5597675176521,30.388801460457216L711.3373611863752,33.611083092097715L712.3855052588049,36.10165027138396L709.8783141310726,35.783930288402416L705.8380910801936,32.41206506777735L699.3458834087814,30.849113812628502L696.1613030163559,31.05143321924129L693.4967328880585,35.031907395765074L688.5134938279815,36.49093197203592L682.9269697859136,36.30900752678963L680.8582622041226,38.05720707816636L680.6379742813554,41.151410397277914L674.8398300194492,44.3436813655037L674.7985491739838,40.66203237537297L672.070731192912,40.16173499593697L671.3772073860305,44.0673684125677L666.9246290998076,44.645983842089436L665.0593405275206,46.509635804518666L662.6768423728153,53.333432870707384L657.8604523562576,62.218056845586034ZM628.4307482118014,-15.053116312477187L623.9499366706058,-11.219750803424859L621.5066651998716,-10.586131461778223L621.5062504719748,-13.476752252945289L632.840659032761,-20.868734309851106L630.9338737788576,-16.157563868972147Z"
			},
			{
				"name": "Kentucky",
				"abbr": "KY",
				"path": "M753.0868097611435,231.5095952167494L758.3881104684729,234.71777727234848L761.5274086292866,232.28098147181004L769.9028858415065,233.33933589793355L771.8695785909039,230.26479750171166L774.7857517684894,228.92681594332885L776.3821348053837,233.53840816918319L778.9518646258989,233.95858514184283L782.4264929723761,237.36713365005858L783.0307958754663,245.86090899779265L786.391107168798,250.84275668655687L790.4173553562623,254.47664128740735L791.9496461115767,257.531815958743L796.5741623813633,260.1332987015305L799.49307510622,260.1697093153224L792.2577531670877,268.8792177149144L784.8433190613816,274.14852239133234L785.1444205762105,276.28948580372435L782.166738528048,278.577064324092L782.267034356192,281.057674264222L778.2130636158349,282.70793982568284L777.188576740715,285.96480101081L765.9156671239894,291.5176828035609L765.613704993775,292.0241831778203L746.7473154256534,294.08412502172257L730.2134962531583,295.08820443726984L725.897993874079,295.8828337621768L701.3635073206306,297.3767028640741L673.5827602167841,300.5699527732269L668.6343961862946,299.7497596247023L669.4230794170146,304.7969652905522L641.836628647947,306.6171148043843L639.1854796553566,307.11223902854067L640.1526953793972,303.4849600483359L643.5155031470264,304.4855047913434L644.5108987107694,292.95750363510297L643.3140345157354,291.4955251637267L646.3285791104732,286.32161886491235L648.8318240972023,285.8264628885987L657.2277129663944,289.5199113901683L659.814249203468,286.9912206864833L657.4767682391125,283.4586919392276L658.0856941335126,280.4669836257557L666.8625901451123,277.1174646665145L664.4191064919818,272.3614115439415L666.9504632096675,268.1207913207413L668.755146994374,265.33317525043117L674.205808113066,264.55217803792516L675.8142461896185,262.3947491108187L677.8960089345633,264.2250882018793L680.668625487842,263.0444381759837L686.5288218087,266.6915483005856L688.040303812671,263.60194575356036L693.2444816671402,260.3105117235302L694.9408329501518,262.9383655433504L699.7095873214619,261.37961479171395L699.0454354205565,258.3417393010311L703.4306765367393,254.32738783044124L704.591549030679,257.46871506928755L709.7298470105839,259.5741462597473L712.027569415435,257.4673118471708L713.2856729779446,250.18778337135177L716.9173688521432,248.39622588954353L717.9464342016272,244.7099430330993L721.3437840374338,242.0024770035816L720.4913518527806,236.50340573540302L726.1502305297605,237.10713701710802L729.8401417720617,234.03856644012194L733.574874622419,233.44491271805282L730.9158197635415,225.98356199395516L732.4062932831773,224.5641155302992L740.5763996766548,223.58171928142542L745.6179726274648,228.8722193082731L746.2745041020031,231.28038907194218Z"
			},
			{
				"name": "Wisconsin",
				"abbr": "WI",
				"path": "M600.4449616308265,26.00488753047125L604.1267884898185,27.46489367432264L606.5267937055054,32.05487373002211L626.7921907022958,36.34877914793333L635.3688182613114,39.83918699186256L637.843112324197,38.72693055665127L646.3404967416977,40.796908902648056L648.8654532573469,44.111635671143404L653.1966192592771,47.11580186136007L653.4056204521465,52.00906509334868L651.9160659880923,55.975753736327306L656.5715302162471,56.18582059215032L655.0970145475688,60.309232936062244L658.3576602328062,62.9425022949747L657.9020305875804,66.36495501903687L654.1873979303163,67.30423038373146L651.4987812844506,73.9920765594261L650.6816895308301,78.52181789015981L653.0214869754052,79.09335863041633L655.8036460804828,75.93080138744949L658.5624648377576,70.15109932849919L662.4664760148403,67.64797687506211L665.048857020281,60.33800640027539L668.980858417051,58.43280056189815L669.0049162703173,62.12096474687996L666.5246268249734,65.73717736385106L662.0806750845468,77.83839298589692L661.1367710197467,84.38969237539845L661.6545903294625,88.96447520373022L659.7195639280385,90.67674922131846L658.4124681995846,97.10919063316487L659.5373939364832,102.40645562144164L658.0868120292399,106.07938150181485L656.4130619046375,115.01560937126214L657.555268248414,121.86267218816306L660.5257950741448,127.78242646560761L660.4501716691619,135.97578895632455L640.3465164053433,137.60895176560598L602.5291408811875,139.65085389319802L600.8781777497745,136.19802671431785L593.4524377836287,133.36160512219703L591.6637190983647,128.9864293959306L590.6764327263796,122.723030861918L592.9397549269146,119.21973805382049L589.8118843599412,116.6096260886236L589.3820459459572,112.47668006621302L588.1186596618819,109.30945074115539L588.4462948573984,104.83314045188172L584.3066210224267,98.88731461184466L581.0811468452343,97.96400639874855L575.1831622680392,93.46663006022027L574.0427008534136,89.8304517121212L567.8179136401624,87.01724392107985L565.6321961135276,84.03367704191282L561.4867710348788,83.72870673698822L556.1025690563577,78.85583193399634L557.1588721364052,68.55148782344145L556.5661016671761,63.82388395401608L558.6719496503755,59.46416421059166L556.0861113293533,56.03395298598707L553.8283643358913,55.803355725136726L554.0185058609113,51.820016052169876L558.29277714633,45.711140794636776L563.739361383497,43.21766282608519L564.8430900509297,41.49394275258737L564.2008261890888,25.03079165042368L568.0007783753745,22.590835143654886L569.5233227420683,23.74766466354572L573.8486506013144,23.866143975395516L586.96038131939,18.50859231182153L591.748349621906,15.66227212468948L593.5329232038214,17.547012435332135L591.1090525095788,21.340677036455645L597.6808116098965,25.70730436138183Z"
			}
		];
	
	d3.csv("CEHS_Dashboard_data_table.csv", function(data) {
			
	//variable for citywise
	var nested_statewise = d3.nest()
						.key(function(d)
						{return d.State.trim()})
						.rollup(function(d) { 
							/*return {d3.sum(d, function(g) {return g.Indemnity_Cost; })/d.length,
							d.length}*/
							return  {
								total_count: d.length,
								litigated_count: d.filter(function(d){return d.Legal_Indicator.trim() == "Y"}).length,
								nonlitigated_count: d.filter(function(d){return d.Legal_Indicator.trim() == "N"}).length,			
								total_Indemnity_Cost: d3.sum(d, function(d) { return d.Indemnity_Cost; }).toFixed(2),
								total_Medical_Cost: d3.sum(d, function(d) { return d.Medical_Cost; }).toFixed(2),
								total_Expense_Cost: d3.sum(d, function(d) { return d.Expense_Cost; }).toFixed(2)
							};
							})
						.entries(data);	

	nested_statewise = nested_statewise.sort(function(obj1, obj2) {
						return obj1.values.total_Medical_Cost - obj2.values.total_Medical_Cost;
						});
	for(var i=0;i<nested_statewise.length;i++){
					global_nested_statewise.push(
					{key: nested_statewise[i].key,
					total_count: nested_statewise[i].values.total_count,
					litigated_count: nested_statewise[i].values.litigated_count,
					nonlitigated_count: nested_statewise[i].values.nonlitigated_count,
					total_Indemnity_Cost: nested_statewise[i].values.total_Indemnity_Cost,
					total_Medical_Cost: nested_statewise[i].values.total_Medical_Cost,
					total_Expense_Cost: nested_statewise[i].values.total_Expense_Cost,
					Total_Cost: (nested_statewise[i].values.total_Indemnity_Cost + nested_statewise[i].values.total_Medical_Cost+nested_statewise[i].values.total_Expense_Cost)/nested_statewise[i].values.total_count
					});
		
			}
	console.log("global_nested_statewise:"+global_nested_statewise.Total_Cost);	
	makeTableHTML();
	readtabledata(mapData);
	});
});

function readtabledata(mapData) {	
	var var_data = [];
    Highcharts.data({
        table: document.getElementById('statetable'),
        startColumn: 1,
        startRow: 0,
        complete: function (options) {
			//console.log(options);
			//console.log(options.series[4].data);
            $.each(options.series[4].data, function () {
                var_data.push({
                    name: this[0],
                    value: this[1]
                });
            });
        }
    });
    // Process mapdata
    $.each(mapData, function () {
        var path = this.path,
            copy = {
                path: path
            };

    });
	console.log(var_data);
	console.log(mapData);
	makemap(mapData,var_data);
}

function makemap(mapData,var_data) {

    // Initiate the chart
    $('#container').highcharts('Map', {
		credits: false,
        title: {
            text: 'Illinois and Neighboring States'
        },

        subtitle: {
            text: 'variation of cost per claim for each state'
        },

        mapNavigation: {
            enabled: true,
            enableButtons: false
        },
		
        xAxis: {
            labels: {
                enabled: false
            }
        },

        colorAxis: {},
		
		exporting: {
            buttons: {
                contextButton: {
					enabled: false
                },
                exportButton: {
                    text: 'Save',
                    // Use only the download related menu items from the default context button
                    menuItems: Highcharts.getOptions().exporting.buttons.contextButton.menuItems.splice(2)
                }
            }
        },
        series: [{
            mapData: mapData,
            data: var_data,
            joinBy: 'name',
            name: 'Unemployment rate per 2015',
            states: {
                hover: {
                    color: '#BADA55'
                }
            },
            dataLabels: {
                enabled: true,
                formatter: function () {
                    return this.point.abbr;
                },
                style: {
                    fontSize: '10px'
                }
            },
            tooltip: {
                valuePrefix: '$'
            }
        }]
    });
}
